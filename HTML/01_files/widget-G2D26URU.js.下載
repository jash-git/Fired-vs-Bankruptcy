"use strict";(()=>{var g=window.jQuery;var Be=function(){for(var t=document.createElement("div"),e="transform WebkitTransform MozTransform OTransform msTransform".split(" "),i="transition WebkitTransition MozTransition OTransition msTransition".split(" "),n=0;n<e.length;n++)if(t.style[e[n]]!==void 0&&t.style[i[n]]!==void 0)return!0;return!1}(),Ft=function(t,e,i){Be?t.css({"-webkit-transform":"translate3D("+e+"px, 0, 0)","-moz-transform":"translate3D("+e+"px, 0, 0)","-ms-transform":"translate3D("+e+"px, 0, 0)","-o-transform":"translate3D("+e+"px, 0, 0)",transform:"translate3D("+e+"px, 0, 0)"}):t.css("opacity",.7).animate({"margin-left":e+"px",opacity:1},i.transition_ms)},je=function(t,e,i,n,s){n&&!s&&t.animate({opacity:0},i.transition_ms,function(){g(this).css({"margin-left":e+"px"}),g(this).animate({opacity:1},i.transition_ms+200)})},He=function(t,e,i){t.css({"margin-left":e+"px"})},Ut=function(t){switch(t){case"none":return He;case"slide":return Ft;case"fadeIn":return je;default:return Ft}},wt=function(t){t.preventDefault(),t.stopPropagation()},Kt=function(t,e){e=g.extend({$target_wrap:null,$target:null,$prev:null,$next:null,$curr:null,$autoswipe_pause_el:null,total:1,transition_ms:null,animation_type:"slide",infinite:!1,autoswipe_seconds:0,onPage:null},e),e.transition_ms===null&&(e.transition_ms=e.animation_type==="slide"?200:0),this.$el=t,this.$target_wrap=e.$target_wrap||t,this.$target=e.$target||t,this.$autoswipe_pause_el=e.$autoswipe_pause_el||t,this.p=1,this.offset=0,this.total=e.total,this.curr_px=0,this.options=e,this._drag_ended=!0,this._drag_blocked=!1,this.init()};Kt.prototype={_setTransitionDuration:function(t){var e=this.$target_wrap.get(0);e.style.webkitTransitionDuration=t+"ms",e.style.mozTransitionDuration=t+"ms",e.style.msTransitionDuration=t+"ms",e.style.oTransitionDuration=t+"ms",e.style.transitionDuration=t+"ms"},init:function(){if(this.$el.addClass("infinite-swipe-stage"),this.$target_wrap.addClass("infinite-swipe-target-wrap"),this._setTransitionDuration(this.options.transition_ms),this.$target.addClass("infinite-swipe-target"),this.options.infinite){var t=this.$target.clone().attr("aria-hidden",!0).addClass("infinite-swipe-target-clone").css("left","-"+this.getWidth(!0)+"px").find("a").attr("tabindex",-1).end(),e=this.$target.clone().attr("aria-hidden",!0).addClass("infinite-swipe-target-clone").css("left",this.getWidth(!0)+"px").find("a").attr("tabindex",-1).end();t.insertBefore(this.$target),e.insertBefore(this.$target),this.$target=this.$target.parent().find(".infinite-swipe-target")}this.addListeners(),!this.options.infinite&&this.options.$prev&&this.options.$prev.toggleClass("disabled",this.p===1),this.options.autoswipe_seconds>0&&this.initAutoswipe()},initAutoswipe:function(t){t&&(this.options.autoswipe_seconds=t);var e=this;this._as_next=function(){if(e._drag_blocked=!1,e._as_timeout_id||e.p===e.total&&!e.options.infinite){clearTimeout(e._as_timeout_id);return}e._as_timeout_id=setTimeout(function(){e._as_pause||e.swipeNext(),e._as_timeout_id=null,e._as_next()},e.options.autoswipe_seconds*1e3)},this._as_resume_event=function(){e._as_next()},this._as_pause_event=function(){e._as_timeout_id&&(clearTimeout(e._as_timeout_id),e._as_timeout_id=null)},this._as_next(),this.$autoswipe_pause_el.on("mouseenter focusin",this._as_pause_event).on("mouseleave focusout",this._as_resume_event)},onPrev:function(t){t.preventDefault(),t.stopPropagation(),this._drag_blocked=!1,!(this.p===1&&!this.options.infinite)&&this.swipePrev()},onNext:function(t){t.preventDefault(),t.stopPropagation(),this._drag_blocked=!1,!(this.p===this.total&&!this.options.infinite)&&this.swipeNext()},onDragLeft:function(t,e,i){if(!this._swiped){if(this.p===this.total&&!this.options.infinite){this._drag_blocked=!0;return}if(this._drag_blocked=!1,window.addEventListener("touchmove",wt,{passive:!1}),Math.abs(e)>5&&!(this.p===this.total&&!this.options.infinite)){t.preventDefault(),t.stopPropagation(),this._drag_ended=!0,this._swiped=!0,this.curr_px=0,this._setTransitionDuration(0),this.swipeNext();return}var n=i;this.animate_px(n)}},onDragRight:function(t,e,i){if(!this._swiped){if(this.p===1&&!this.options.infinite){this._drag_blocked=!0;return}if(this._drag_blocked=!1,window.addEventListener("touchmove",wt,{passive:!1}),Math.abs(e)>5&&!(this.p===1&&!this.options.infinite)){t.preventDefault(),t.stopPropagation(),this._drag_ended=!0,this._swiped=!0,this.curr_px=0,this._setTransitionDuration(0),this.swipePrev();return}var n=i;this.animate_px(n)}},onDragStart:function(t){this._drag_ended=!1,this._setTransitionDuration(0)},onDragEnd:function(t){this._drag_ended=!0,this._setTransitionDuration(this.options.transition_ms),this._swiped||this.animate(),this._swiped=!1,window.removeEventListener("touchmove",wt,{passive:!1})},onSwipeTotal:function(t,e){var i=this;this.total!==e&&(this.total=e,this.p>this.total&&(this.p=this.total),this.getWidth(!0),this.offset=0,this.animate(),this.$target.each(function(n){g(this).css("left",i.getWidth(!0)*(i.offset+n)+"px")}))},onSwipePage:function(t,e){this._drag_blocked=!1,!(e<1||e>this.total)&&(this.p=e,this.animate())},onWindowResize:function(t){var e=this;setTimeout(function(){var i=e.getWidth(),n=e.getWidth(!0);i!==n&&(e.$target_wrap.addClass("infinite-swipe-resizing"),e.animate(0,function(){e.$target_wrap.removeClass("infinite-swipe-resizing")}))},200)},addListeners:function(){var t=this,e="touchstart click",i=navigator.userAgent;i.indexOf("Android")>=0&&(e="touchstart"),this.options.$prev&&this.options.$prev.on(e,g.proxy(this.onPrev,this)),this.options.$next&&this.options.$next.on(e,g.proxy(this.onNext,this)),this._dragleft_event=function(){t.onDragLeft.apply(t,arguments)},this._dragright_event=function(){t.onDragRight.apply(t,arguments)},this._dragstart_event=function(){t.onDragStart.apply(t,arguments)},this._dragend_event=function(){t.onDragEnd.apply(t,arguments)},this._swipetotal_event=function(){t.onSwipeTotal.apply(t,arguments)},this._swipepage_event=function(){t.onSwipePage.apply(t,arguments)},this.$el.on("dragleft",this._dragleft_event).on("dragright",this._dragright_event).on("dragstart",this._dragstart_event).on("dragend",this._dragend_event).on("swipe_total",this._swipetotal_event).on("swipe_page",this._swipepage_event),this._resize_event=function(){t.onWindowResize()},g(window).on("resize orientationchange",this._resize_event)},removeListeners:function(){var t="touchstart click",e=navigator.userAgent;e.indexOf("Android")>=0&&(t="touchstart"),this.options.$prev&&this.options.$prev.off(t,g.proxy(this.onPrev,this)),this.options.$next&&this.options.$next.off(t,g.proxy(this.onNext,this)),this.$el.off("dragleft",this._dragleft_event).off("dragright",this._dragright_event).off("dragstart",this._dragstart_event).off("dragend",this._dragend_event).off("swipe_total",this._swipetotal_event).off("swipe_page",this._swipepage_event),g(window).off("resize orientationchange",this._resize_event)},getWidth:function(t){return(t||!this._w)&&(this._w=this.options.getWidth?this.options.getWidth():this.$target.width()),this._w},swipePrev:function(){this.animate(-1)},swipeNext:function(){this.animate(1)},animate:function(t,e){var i=this,n=this.p;t&&(this.p+=t),this.curr_px>30?this.p--:this.curr_px<-30&&this.p++,this.options.infinite?(this.p===this.total+1?(this.p=1,this.offset++):this.p===0&&(this.p=this.total,this.offset--),this.$target.each(function(r){var o=i.getWidth(!0)*(i.offset+r-1);g(this).css("left",o+"px")})):this.p=Math.max(Math.min(this.p,this.total),1),this.curr_px=0;var s=-((this.p-1+this.offset*this.total)*this.getWidth(!0))/this.total;Ut(this.options.animation_type)(this.$target_wrap,s,this.options,this._drag_ended,this._drag_blocked),this.options.infinite||(this.options.$prev&&this.options.$prev.toggleClass("disabled",this.p===1),this.options.$next&&this.options.$next.toggleClass("disabled",this.p===this.total)),this.options.$curr&&this.options.$curr.text(this.p),n!=this.p&&this.options.onPage&&this.options.onPage(this.p),e&&setTimeout(e,this.options.transition_ms)},animate_px:function(t){this.curr_px=t;var e=-((this.p-1+this.offset*this.total)*this.getWidth())/this.total+t;Ut(this.options.animation_type)(this.$target_wrap,e,this.options,this._drag_ended,this._drag_blocked)},destroy:function(){this.$el.removeClass("infinite-swipe-stage"),this.$target_wrap.removeClass("infinite-swipe-target-wrap"),this.$target.filter(".infinite-swipe-target-clone").remove(),this.$el.find(".infinite-swipe-target").removeClass("infinite-swipe-target"),this.removeListeners(),this.options.autoswipe_seconds>0&&(this._as_timeout_id&&(clearTimeout(this._as_timeout_id),this._as_timeout_id=null),this.$el.off("mouseenter focusin",this._as_pause_event).off("mouseleave focusout",this._as_resume_event))},pause:function(){this._as_pause=!0},resume:function(){this._as_pause=!1,this._as_next()}};g.fn.infiniteSwipeEvent=function(){var t=g(this),e=!1,i=null,n={x:null,y:null},s={x:null,y:null},r;t.on("touchstart",function(o){var d=o.originalEvent.touches[0].pageX,a=o.originalEvent.touches[0].pageY;e=!0,i=null,n.x=s.x=d,n.y=s.y=a,r=o.timeStamp}).on("touchend touchleave",function(o){e&&i!=="y"&&t.trigger("dragend"),e=!1}).on("touchmove",function(o){if(!(!e||i==="y")){var d=o.originalEvent.touches[0].pageX,a=o.originalEvent.touches[0].pageY,c={x:s.x-d,y:s.y-a};if(!i){if(i=Math.abs(c.x)>=Math.abs(c.y)?"x":"y",i==="y")return;t.trigger("dragstart")}var l=o.timeStamp-r,f={x:n.x-d,y:n.y-a},p=Math.abs(c.x/l);c.x>0?t.trigger("dragleft",[p,-f.x]):c.x<0&&t.trigger("dragright",[p,-f.x]),s.x=d,s.y=a,r=o.timeStamp}})};g.fn.infiniteSwipe=function(t,e){return this.each(function(){if(typeof t=="string"){var i=g(this).data("infiniteswipe");i&&i[t](e)}else g(this).infiniteSwipeEvent(),g(this).data("infiniteswipe",new Kt(g(this),t))})};function Yt(t,e){let i=function(n,s){return n.complete?s($(n)):setTimeout(()=>i(n,s),100)};t.each(function(){i(this,e)})}function Fe(t){if(!t.is(":visible"))return;let e=t.width(),i=t.height(),n=t.parent().height(),s=e/i;i<=n?(e=parseInt(e*n/i,10),t.css({width:e+"px",height:n+"px"})):s<1.2&&s>.35&&e<=400&&(e=parseInt(e*(s/1.2),10),t.css({width:e+"px"}))}function Ue(t){let e=t.parent();if(!e.hasClass("img-size-contain"))return;e.css({"text-align":"center"}),t.css({margin:"0 auto",height:"auto",width:"auto","max-width":"100%","max-height":"100%","min-width":"5px","min-height":"5px",left:0,right:0});let i=t.outerWidth(),n=t.outerHeight(),s=e.outerWidth(),r=e.outerHeight();try{let o=i/n>s/r;return t.css({width:o?"100%":"auto",height:o?"auto":"100%"})}catch{}}var st=t=>Yt(t,Fe),rt=t=>Yt(t,Ue);function Gt(t={}){let{thumbnail_fix_16x10:e,is_secret_widget:i}=t,n=$(".recommendations"),s=function(o){let d=$('[data-page="'+o+'"]').parent().find("img[data-org-src]");d.each(function(){let a=$(this).attr("data-org-src");$(this).attr("src",a).removeAttr("data-org-src")}),e&&st(d),rt(d)};$(window).on("pre-expose expose check-thumbnail",function(o){o&&o.type==="pre-expose"&&i||s(1)}),n.on("page",(o,d)=>s(d));let r=$("img.thumbnail:not([data-org-src])");e&&st(r),rt(r),window.top===window&&s(1)}function Vt(t,...e){return e.filter(i=>i&&typeof i=="object"&&!Array.isArray(i)).forEach(i=>{Object.keys(i).forEach(n=>{i[n]!==void 0&&(t[n]=i[n])})}),t}var{$:at}=window,Qt={};function xt(t){t.is("td,th")?t.addClass("empty").html("&nbsp;"):t.remove()}function Xt(t){let e=t.find("img.thumbnail").attr("data-org-src");e&&t.find("img.thumbnail").attr("src",e)}function Jt(t,e,i){let n=i&&i.messagebox,s=null,r=()=>{s=t.clone(!0),e.replaceWith(s);let o=e.find("img");Qt.thumbnail_fix_16x10&&st(o),rt(o),s.find("img.thumbnail").on("error",R)};if(n){let o=at(n);e.html(o),setTimeout(()=>e.fadeOut("slow",()=>{r(),s.fadeIn("slow")}),1e3)}else r(),e.is("[data-page]")&&s.attr("data-page",e.data("page"))}function Ye(t){let e=null,n=t.find(".list-sub").find('.item-sub:not(:has([err="1"]))').not(".empty").eq(0);return n.length&&(e=n.clone(!0),n.parent().append(n)),e}function Q(t,e={}){let i=t.closest(".target-wrap"),n=t.attr("data-idx");if(n.indexOf("sub")>-1){xt(t);return}let s=Ye(i);i.find(".target").each((r,o)=>{let d=at(o),a;if(t=d.find(`.item[data-idx=${n}]`),s){a=s,Xt(a),a.attr("data-idx",n),a.addClass("item"+n),Jt(a,t,e);return}let c=Number(n),f=d.find('.item .thumbnail:not([err="1"])').closest(".item").filter((p,m)=>m.dataset.idx&&Number(m.dataset.idx)>c).last();f.length>0?(a=f.clone(!0),a.attr("data-idx",n),xt(f),Xt(a),Jt(a,t,e)):xt(t)}),i.find(".item").length===0&&(document.body.innerHTML="")}function R(){let t=this,e=(t.currentSrc||t.src).replace(/\?.*$/,"");if(/\.webp$/i.test(e))at(t).prev("source").remove();else{let n=at(t).closest(".item");Q(n)}}function Zt(t){Vt(Qt,t)}var F=class{$wrap=null;total=null;onPageHandler=null;constructor(e){this.$wrap=e.$wrap,this.total=e.total||Number(this.$wrap.attr("data-total"))||0,this.initSwipe(this.$wrap),this.initThumbnailChecker(this.$wrap)}onPage(e){this.onPageHandler=e}onExpose(){if(this._exposed)return;this._exposed=!0;let e=this.$wrap,i=Number(e.attr("data-autoswipe_seconds"));!(e.attr("data-infinitefeed")==="true")&&this.total>1&&i>0&&e.find(".list").infiniteSwipe("initAutoswipe",i)}initSwipe(e){if(e.attr("data-infinitefeed")==="true"||this.total<=1){e.find(".prev, .next").addClass("disabled");return}let n=/(?:Chrome|CriOS)\/85/.test(navigator.userAgent);e.find(".list").infiniteSwipe("destroy").infiniteSwipe({$target_wrap:e.find(".target-wrap"),$target:e.find(".target"),total:this.total,$prev:e.find(".prev"),$next:e.find(".next"),$curr:e.find(".current-page"),infinite:n?!1:e.attr("data-infinite")==="true",animation_type:e.attr("data-animation_type"),$autoswipe_pause_el:e,onPage:o=>{this.setPage(o),this.onPageHandler&&this.onPageHandler(o)}});let s=e.find(".page-positions"),r=this;s.on("click",".page-position",function(o){let d=window.$(o.target).data("page");e.find(".list").trigger("swipe_page",d),r.setPage(d)}),this.setPage(1)}initThumbnailChecker(e){e.find("img.thumbnail").on("error",R),e.find("img[err]").each(R)}setPage(e){let i=this.$wrap.find(".page-positions");if(i.length>0){i.html("").data("page",e);for(let n=1;n<=this.total;n++)i.append(window.$(`<span class="page-position ${n===e?"current":""}" data-page="${n}"><span class="page-position-num" data-page="${n}">${n}</span></span>`))}this.$wrap.trigger("page",e)}};function Ve(t){let e=0;if(t.length===0)return e;for(let i=0;i<t.length;i++){let n=t.charCodeAt(i);e=(e<<5)-e+n,e|=0}return Math.abs(e)}function U(t){if(t==="#?")return;t.indexOf("is_gif=1")===-1&&(t+=(t.indexOf("?")>-1&&"&"||"?")+"is_gif=1");let i="beacon-"+Ve(t),n=document.getElementById(i);n||(n=document.createElement("img"),n.width=n.height="1",n.src=t,n.style.display="none",document.body.appendChild(n)),n.onload=()=>document.body.removeChild(n)}function te(){return window.TEST_API_SERVER_DOMAIN||"api.dable.io"}function ee(){return window.TEST_RECO_LOGGING_SERVER_DOMAIN||"r-log.dable.io"}function ct(){return window.location.protocol==="https:"?"https:":"http:"}function dt(t){return Object.keys(t).map(e=>{let i=typeof t[e]=="object"?JSON.stringify(t[e]):String(t[e]);return`${e}=${encodeURIComponent(i)}`}).join("&")}function ie(t){let e={};return t.replace(/([^=&?]+)=([^&]*)/g,(i,n,s)=>{e[n]=decodeURIComponent(s)}),e}function ne(t){return t?t.replace(/([^:]+:\/\/[^/]+).*/,"$1"):null}var vt={};function oe(t){let e=window.$,i=t.nocache||!1,{item_id:n,responsive_group:s,nolog:r,post_param:o,settings_group:d}=t,a=`${n}--${s}`;if(vt[a]&&!i)return e.when(vt[a]);let c=window.location,l=`${c.protocol}//${c.host}${c.pathname}/recommendations`,f=ie(c.search),p={},m=f;delete f.client_width,o&&(Object.keys(o).forEach(k=>{typeof o[k]<"u"&&(p[k]=o[k])}),delete p.client_width,m=p),n&&(m.item_id=n),s!==null&&(m.responsive_group=s),r&&(m.nolog=1),d&&(m.abtest_index=d);let b=`${l}?${dt(f)}`,A=o?e.post(b,p):e.get(b);return e.when(A).then(L=>{let k=e(L);return vt[a]=k,k})}function se(t){if(!t||typeof t.length!="number")throw new Error("arrayFrom: invalid argument");return Array.from&&!se.ie?Array.from(t):Array.prototype.slice.call(t)}se.ie=!1;function lt(t){return Array.isArray(t)?t:[t]}var Je=new function(){this.detect=function(t,e){var i=!1,n=2,s=!1,r=!1;if(typeof e!="function")return;t+="?ch=*&rn=*";function o(f,p){n===0||p>1e3?f(n===0&&i):setTimeout(function(){o(f,p*2)},p*2)}function d(){--n||(i=!s&&r)}var a=Math.random()*11,c=new Image;c.onload=d,c.onerror=function(){s=!0,d()},c.src=t.replace(/\*/,1).replace(/\*/,a);var l=new Image;l.onload=d,l.onerror=function(){r=!0,d()},l.src=t.replace(/\*/,2).replace(/\*/,a),o(e,250)}},Qe=new Promise(t=>{Je.detect("https://images.dable.io/px.gif",t)});function K(){return Qe}var{$:_}=window,bt=!1,ce=!1;function re(t,e){return t.replace(new RegExp(`^.*${e}=([^&]+).*$`),"$1")}function I(t){let{from:e}=t,i=[];for(let n in t)n!=="from"&&i.push(n+"="+t[n]);e.indexOf("http")===0&&window.parent.postMessage(i.join("&"),ne(e))}function yt(t,e=0){let i=_("img.thumbnail:visible");if(i.length>0&&i.height()===0&&e<10)setTimeout(()=>yt(t,e+1),100);else{let n=_("body").outerHeight(!0)||1;t(n)}}function Ze(){return typeof window.matchMedia=="function"?window.matchMedia("(prefers-color-scheme: dark)").matches:void 0}function ti({log_url:t,ad_log_urls:e,ad_size:i,abp:n}){e||(e=[]);let s=function(r){return r=r.replace(/^https?:/,""),r.indexOf("?")===-1&&(r+="?"),Ze()&&(r+="&is_dark_mode=1"),r+="&abp="+(n?"1":"0"),r};t&&U(s(t));for(let r=0;r<e.length;r++){if(r>=i)continue;lt(e[r]).forEach(d=>U(s(d)))}}function ei(t,e,{wrapped:i,ad_size:n,widget_x:s,widget_y:r,abp:o}){let d=function(a){return a=a.replace(/^https?:/,""),a.indexOf("?")===-1&&(a+="?"),i&&(a+="&is_wrapped=1"),s>-1&&(a+=`&widget_x=${s}`),r>-1&&(a+=`&widget_y=${r}`),a+=`&abp=${o?"1":"0"}`,a};t&&U(d(t)),e||(e=[]);for(let a=0;a<e.length;a++){if(a>=n)continue;lt(e[a]).forEach(l=>U(d(l)))}}var ae=null;function Z(t,e=!1){yt(i=>{e&&ae===i||(t.if_height=i,ae=i,I(t))})}function de(t){let{messages:e,impressionlog_link:i,exposelog_link:n,ad_exposelog_links:s,ad_implog_links:r,ad_size:o,is_secret_widget:d,pre_expose:a,wrapped_frame:c}=t,{id:l,from:f,sliding:p}=e;p&&(I({id:l,from:f,sliding:p}),delete e.sliding),_(window).on("syncheight",()=>Z({id:l,from:f},!0)),window.addEventListener("load",function(){yt(function(u){e.if_height=u,e.has_recom=u>1&&1||0,I(e)});let h=()=>setTimeout(()=>{ce?(Z({id:l,from:f,init:"1"}),K().then(u=>{ti({from:f,log_url:i,ad_log_urls:r,ad_size:o,abp:u})})):h()},300);h(),setTimeout(function(){Z({id:l,from:f},!0),_(window).on("orientationchange resize",()=>Z({id:l,from:f},!0))},3e3)}),window.location.href.indexOf("test=1")===-1&&_(".recommendations").on("page",(h,u)=>I({id:l,from:f,check_and_page_expose:1,page:u})),a&&setTimeout(()=>_(window).trigger("pre-expose"),0);let m=!1,b=(h={})=>{if(bt||window.location.href.indexOf("test=1")>-1||d&&!m)return;let{widget_x:u,widget_y:x,wrapped:C}=h;_(window).trigger("expose"),K().then(D=>{ei(n,s,{wrapped:C,ad_size:o,widget_x:u,widget_y:x,abp:D})}),bt=!0},A=[1],L=(h,u)=>{h.forEach((x,C)=>{let D=Math.floor(C/o)+1;u===D&&lt(x).forEach(P=>{P=P.replace(/^https?:/,""),c&&(P+=(P.indexOf("?")>-1&&"&"||"?")+"is_wrapped=1"),K().then(O=>{U(P+(O?"&abp=1":""))})})})},k=h=>{A.indexOf(h)>-1||(A.push(h),L(s,h),L(r,h))},pt=h=>_(".recommendations .item").each(function(){let u=_(this);u.find("a").attr("href").indexOf(h)>-1&&u.children(".item-link").hide()}),W=!0,ht=function(h){let u;if(!(!h.data||typeof h.data!="string")){try{u=decodeURIComponent(h.data)}catch{u=h.data}if(u.indexOf){if(u.indexOf("resume_dable_widget")>-1)W=!0;else if(W)if(u.indexOf("update_height")>-1)Z({id:l,from:f},!0);else if(u.indexOf("expose")===0){let x=u.split("=")?.[1]?.split(",")||[];b({widget_x:x[0],widget_y:x[1]})}else if(u.indexOf("page_expose")===0){let x=Number(re(u,"page_expose"));k(x)}else if(u.indexOf("show_secret_widget")>-1)m=!0,b();else if(u.indexOf("pre_expose")>-1&&!a)_(window).trigger("pre-expose");else if(u.indexOf("block_content")===0){let x=re(u,"block_content");pt(x)}else u.indexOf("exposure_start")>-1?_(window).trigger("exposure_start"):u.indexOf("exposure_end")>-1?_(window).trigger("exposure_end"):_(window).trigger("receive-message",u)}}};_(window).on("close_dable_widget",function(){let h=_.extend({},e);h.close_dable_widget=1,I(h),W=!1});let et=function(){_(window).off("mouseover",et),b()};if(_(window).on("mouseover",et),window.addEventListener("message",ht,!1),c&&window.IntersectionObserver){let h=new IntersectionObserver((C,D)=>C.forEach(function(P){P.isIntersecting&&(bt||b({wrapped:!0}),D.unobserve(P.target))})),u=_("<div />").css({position:"fixed",top:"200px",left:0,width:"1px",height:"1px"}).appendTo(document.body),x=_("<div />").css({position:"fixed",left:0,bottom:0,width:"1px",height:"1px"}).appendTo(document.body);h.observe(u.get(0)),h.observe(x.get(0))}}function fe(){ce=!0}var $t=window.$,kt=null;function le(t,e){let i=$t("body").width(),n=-1;for(let r=0;r<t.length;r++){let o=t[r];if(typeof o.min_width>"u"&&(o.min_width=0),typeof o.max_width>"u"&&(o.max_width=9999),i>o.min_width&&i<o.max_width){n=r;break}}let s=kt!==n;kt=n,e(s,n)}function ue(t,e,i){typeof e>"u"&&(e=null),kt=e,le(t,i),e>-1&&$t(".widget").attr("data-responsive-group",e+1);let n=null;$t(window).on("resize orientationchange",()=>{n&&clearTimeout(n),n=setTimeout(()=>{le(t,i),clearTimeout(n),n=null},300)})}function ni(t){return/^https?/.test(t)&&t.indexOf("daumcdn.net")===-1}function pe(t){let e=window.$,{id:i,from:n,uid:s,service_id:r,widget_id:o}=t;e(".powered-by, .sp-info a").on("click",d=>{d.preventDefault();let a=e(".target:not([aria-hidden]) .item-sp").toArray().map(l=>({title:e(l).find(".name").text(),thumbnail:e(l).find(".thumbnail").attr("src"),link:e(l).find("a").attr("href")})),c={id:i,from:n,uid:s,service_id:r,widget_id:o,ads:JSON.stringify(a.slice(0,4))};ni(n)?(c.show_dable_popup="1",I(c)):(c.wrapped=window.self!==window.top,window.open(`${d.currentTarget.href}?${dt(c)}`))})}var Y=window.$,me=t=>function(e){let i=window.localStorage.getItem(`${t}:${e}`);return i&&i.length?i.split("|||"):[]},ge=t=>function(e,i){window.localStorage.setItem(`${t}:${e}`,i.join("|||"))},_e=me("dable_block_item"),si=ge("dable_block_item"),we=me("dable_block_ad"),ri=ge("dable_block_ad");function xe(t){return t.find(".thumbnail").attr("src")||t.find(".name").text()}function ai(t){let{serviceName:e,$wrap:i}=t,n=_e(e),s=we(e);if(n.length===0&&s.length===0)return i;let r=[];return i.find(".item").filter(function(o,d){let a=d.className;return!a||r.indexOf(a)!==-1?!1:(r.push(a),!0)}).each(function(){let o=Y(this),d=o.attr("data-item_id"),a=xe(o),c=d&&n.indexOf(d)>-1,l=a&&s.indexOf(a)>-1;(c||l)&&Q(o)}),i}var ve=function(t){t=String(t).toLowerCase()||"en";let e=t.substr(0,2);/^zh-(?:hant|hk|tw)/.test(t)&&(t="zh-hant");let i={ko:"\uD574\uB2F9 \uCF58\uD150\uCE20\uB294 \uCD94\uCC9C\uC5D0\uC11C \uC81C\uC678\uB429\uB2C8\uB2E4.",en:"This content will not be displayed anymore.",zh:"\u8FD9\u4E2A\u5185\u5BB9\u5C06\u4E0D\u4F1A\u518D\u663E\u793A","zh-hant":"\u9019\u500B\u5167\u5BB9\u5C07\u4E0D\u6703\u518D\u986F\u793A",ja:"\u3053\u306E\u30B3\u30F3\u30C6\u30F3\u30C4\u306F\u30EC\u30B3\u30E1\u30F3\u30C9\u3055\u308C\u306A\u304F\u306A\u308A\u307E\u3059",id:"Konten ini tidak lagi ditampilkan",vi:"N\u1ED9i dung n\xE0y s\u1EBD kh\xF4ng \u0111\u01B0\u1EE3c hi\u1EC3n th\u1ECB",ms:"Konten ini tidak akan ditampilkan lagi.",th:"\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32\u0E19\u0E35\u0E49\u0E08\u0E30\u0E44\u0E21\u0E48\u0E1B\u0E23\u0E32\u0E01\u0E0F\u0E2D\u0E35\u0E01\u0E15\u0E48\u0E2D\u0E44\u0E1B"};return`<div class="block-item-message">${i[t]||i[e]||i.en}</div>`},ci=t=>function(e){e.preventDefault();let{serviceName:i,lang:n}=t,s=Y(this).parents(".item"),r=s.attr("data-item_id");Q(s,{messagebox:ve(n)});let o=_e(i);r&&o.indexOf(r)===-1&&(o.push(r),si(i,o)),o.length===10&&Y.ajax({method:"POST",url:"/util/exclude_item_count",data:{service_name:i}})},di=t=>function(e){e.preventDefault();let{serviceName:i,lang:n}=t,s=Y(this).parents(".item"),r=xe(s);Q(s,{messagebox:ve(n)});let o=we(i);r&&o.indexOf(r)===-1&&(o.push(r),ri(i,o)),o.length===10&&Y.ajax({method:"POST",url:"/util/exclude_ad_count",data:{service_name:i}})};function he(t){let e=ai(t);e.find(".item:not(.item-sp) .block-btn-wrap").on("click",ci(t)),e.find(".item-sp .block-btn-wrap").on("click",di(t))}function be(t){Y(window).on("onload_responsive_group",()=>he(t)),he(t)}function ye(t,e={}){if(e.insertImmediate)document.write(`<script src="${t}"><\/script>`);else{let i=document.createElement("script");i.src=t,e.async&&(i.async=!0);let n=document.querySelector("script");n?n.insertAdjacentElement("afterend",i):document.head.appendChild(i)}}var{$:It}=window;function Tt(t,e,i){if(e.data("_cd"))return;e.data("_cd",1);let n=e.parents(".item"),s=t.pageX,r=t.pageY,o=s-n.offset().left,d=r-n.offset().top,a=`&item_x=${o}&item_y=${d}&widget_x=${s}&widget_y=${r}`,c=Date.now();return i.request&&(a+=`&from_request_ms=${c-i.request}`),i.expose&&(a+=`&from_expose_ms=${c-i.expose}`),a}function $e(t){It(".recommendations").on("page",(e,i)=>{if(!t[i-1]){let n=Date.now();t[i-1]={request:n,expose:n}}})}function li(t){let e=!1;K().then(i=>{e=i}),It("body").on("click",".item-sp a",i=>{let n=It(i.currentTarget),s=Number(n.parents("[data-page]").data("page"));try{let r=Tt(i,n,t[s-1]||{});n.attr("href",n.attr("href")+r+`&abp=${e?"1":"0"}`)}catch{}})}function ui(){fe()}function ke(t){ui(),li(t),window.Promise&&window.FingerprintJS&&ye("https://static.dable.io/dist/bundles/fingerprint-C6B4HJKK.js",{async:!1})}var{$:w}=window;w.fn.shuffle=function(){let t=this.get(),e=n=>Math.floor(Math.random()*n),i=w.map(t,function(){let n=e(t.length),s=w(t[n]).clone(!0)[0];return t.splice(n,1),s});this.each(function(n){w(this).replaceWith(w(i[n]))}),w(i)};var Te=0,Ae="";function At(t,e){let i=t%e-e+1;return`n${e}`+(i||"")}function Ce(t){let e=t.index();if(e!==-1){let i=[At(e,2),At(e,3),At(e,4)].join(" ");t.addClass(i)}}function pi(){let t,e=w(".target-wrap[hidden]:eq(0)");if(e.length===1)e.removeAttr("hidden"),t=e.index()+1,w(".recommendations").trigger("page",t);else{t=w(".target-wrap").size()+1;let i=w(".target-wrap:last"),n=w(`.target-wrap:eq(${Te})`).clone().attr("class",Ae).insertAfter(i);Ce(n),n.find(".item:not(.item-sp)").shuffle(),n.find(".item-sp").shuffle(),n.find("[data-page]").each(function(){w(this).attr("data-page",t)});let s=n.find(".target:not(.infinite-swipe-target-clone)");s.find("img.thumbnail").on("error",R),s.find("img[err]").each(R),w(".recommendations").trigger("page",t),Te++}w(window).trigger("syncheight")}function Pe({id:t,from:e,infinite_feed_scroll_amount:i,is_test:n}){n||(Ae=w(".target-wrap:eq(0)").attr("class"),w(".target-wrap").each(function(){Ce(w(this))}),I({id:t,from:e,is_infinite_feed:"1",infinite_feed_scroll_amount:i}),w(window).on("receive-message",function(s,r){r.indexOf("load_infinite_feed")!==-1&&pi()}))}function Ee(t={}){let e=window.$,{from:i,eventTime:n}=t;e("body").on("click",".item-minicontent a",function(s){let r=Number(e(s.currentTarget).parents("[data-page]").data("page"));s.preventDefault();let o=e(this),d=o.data("org-href"),a=Tt(s,e(s.currentTarget),n[r-1]||{});I({from:i,show_minicontent:d});let c=d.replace("click_redirect","click_without_redirect");o.data("clicked")==="1"&&(c+="&force_click_cache=1&nolog=1"),a&&(c+=a),e.getJSON(c+"&callback=?",function(){}),o.data("clicked","1")})}var E=window.$,G={end:35,home:36,left:37,up:38,right:39,down:40,enter:13,space:32},Se=function(){if(!document||!document.createElement)return!1;let t=document.createElement("div"),e="transform msTransform".split(" "),i="transition msTransition".split(" ");return e.some((n,s)=>{let r=i[s];return t.style[n]!==void 0&&t.style[r]!==void 0})}(),V=null,y=null,ut=null;function gi(t){V.not(`:eq(${t})`).removeClass("selected").attr("aria-selected","false"),V.eq(t).addClass("selected").attr("aria-selected","true"),y.not(`:eq(${t})`).removeClass("selected").find("a").attr("tabindex",-1),y.eq(t).addClass("selected").find("a").removeAttr("tabindex")}function q(t){gi(t),Se?y.css({"-ms-transform":`translate3D(-${t*100}%, 0, 0)`,transform:`translate3D(-${t*100}%, 0, 0)`}):(y.eq(t).addClass("selected").removeAttr("hidden").attr("aria-hidden","false"),y.not(`:eq(${t})`).attr("hidden","true").attr("aria-hidden","true")),E(window).trigger("syncheight"),E(".recommendations").trigger("page",t+1)}function _i(t){V=E(".recommendations .tab"),y=E(".recommendations .tab-content");let e=y.length||1;ut=e-1,Se?(y.parent().css({width:`${e*100}%`}),y.removeAttr("hidden"),y.css({width:`${100/e}%`,display:"block",float:"left"})):(y.eq(0).addClass("selected").removeAttr("hidden").attr("aria-hidden","false"),y.not(":eq(0)").attr({hidden:"true","aria-hidden":"true"})),q(t)}function wi(){let t=Number(E(this).attr("data-tab-index"));q(t)}function xi(t){let e=t.keyCode;e===G.end?(t.preventDefault(),q(ut)):e===G.home&&(t.preventDefault(),q(0))}function vi(t){let e,i=t.keyCode,n=Number(E(this).attr("data-tab-index"));i===G.left?(e=n===0?ut:--n,q(e)):i===G.right?(e=n===ut?0:++n,q(e)):(i===G.enter||i===G.space)&&q(n)}function bi(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function yi(){E(".tab-content").each(function(){E(this).find(".item:not(.item-sp):not(.item-sub)").each(function(t){E(this).find(".tab-title").html(t+1)})})}function Ct(t){let e=t.init_tab_idx<0?bi(0,3):t.init_tab_idx;_i(e),V.on("click",wi),V.on("keydown",xi),V.on("keyup",vi),E(window).on("onload_responsive_group",()=>Ct(t)),yi()}var T=window.$,ki=3,Ii=15;function Ot(t){return Number(t.getAttribute("playCount"))||0}function Le(t){let e=Ot(t);e+=1,t.setAttribute("playCount",e)}function Pt(t){return t.getAttribute("charged")==="true"}function Et(t){t.setAttribute("charged",!0)}function Ti(t){return Ot(t)<ki}function Ai(t){let e=Math.abs(t.currentTime).toFixed(0);t.setAttribute("playTime",e)}function Ci(t){return Number(t.getAttribute("playTime"))||0}function Pi(t){t.setAttribute("playTime",0)}function Mt(t){let e=t.split("_");return e.length>3?[e[1],e[2]]:[null,null]}function Lt(t){return{method:"POST",url:`${ct()}//${ee()}/s/${encodeURIComponent(t.service_name)}/u/${t.uid}/video`,data:t}}function Ei(t,e){let i=e.service_id,n=e.service_name,s=e.widget_id,r=e.uid,o=e.channel,d=Mt(t.getAttribute("video-ad-id")),a=d[0],c=d[1],l=t.getAttribute("playCount"),f=t.getAttribute("playTime"),p=t.duration,m=Math.abs(f/p).toFixed(2)>1?1:Math.abs(f/p).toFixed(2),A=Lt({uid:r,service_name:n,service_id:i,campaign_id:a,content_id:c,widget_id:s,channel:o,play_time:f,play_count:l,duration:p,viewing_ratio:m,charging_type:void 0,event_type:"playLog"});T.ajax(A)}function Si(t,e){let i=e.service_id,n=e.service_name,s=e.widget_id,r=e.uid,o=e.channel,d=Mt(t.getAttribute("video-ad-id")),a=d[0],c=d[1],l=t.getAttribute("playCount"),f=t.duration,m=Lt({uid:r,service_name:n,service_id:i,campaign_id:a,content_id:c,widget_id:s,channel:o,play_time:void 0,play_count:l,duration:f,viewing_ratio:void 0,charging_type:void 0,event_type:"completePlayLog"});T.ajax(m)}function St(t,e,i){let n=e.service_id,s=e.service_name,r=e.widget_id,o=e.uid,d=e.channel,a=Mt(t.getAttribute("video-ad-id")),c=a[0],l=a[1],f=t.duration,m=Lt({uid:o,service_name:s,service_id:n,campaign_id:c,content_id:l,widget_id:r,channel:d,play_time:void 0,play_count:void 0,duration:f,viewing_ratio:void 0,charging_type:i,event_type:"chargingLog"});T.ajax(m)}function Oe(t){for(let e=0,i=t.length;e<i;e+=1){let n=t[e];Ot(n)===0&&Le(n),n.play()}}function Me(t){for(let e=0,i=t.length;e<i;e+=1)t[e].pause()}function Oi(t){Ti(t)?(Le(t),Pi(t),t.play()):t.load()}function De(t){let e=t.service_name,i=t.service_id,n=t.widget_id,s=t.uid,r=t.channel,o={service_id:i,service_name:e,widget_id:n,uid:s,channel:r},d=T("div[data-is_video_slot='1'][data-is_light_mp4_video_slot!='1']"),a=d.find("video.thumbnail");for(let c=0,l=d.length;c<l;c+=1)d[c].onclick=function(){let p=T(this).find("video")[0]||null,m=Pt(p);p&&(m||(St(p,o,"click"),Et(p)),Me(a))};for(let c=0,l=a.length;c<l;c+=1)a[c].onended=function(){let f=Pt(this);Oi(this),Si(this,o),f||(Et(this),St(this,o,"view"))},a[c].ontimeupdate=function(){let f=Math.abs(this.currentTime).toFixed(0),p=Ci(this),m=Pt(this);f>p&&(Ai(this),Ei(this,o)),!m&&f>=Ii&&(Et(this),St(this,o,"view"))};T(window).on("expose",function(){let c=T("video.thumbnail");Oe(c)}),T(window).on("exposure_start",function(){let c=T("video.thumbnail");Oe(c)}),T(window).on("exposure_end",function(){let c=T("video.thumbnail");Me(c)})}function Li(){let t=document.querySelectorAll(".item"),e={};return Array.from(t).forEach(i=>{let n=i.dataset.item_id;if(!n||e[n])return;let s=i.querySelector("img")?.src||"";s==="https://static.dable.io/static/i/f6f6f6.gif"||(e[n]={item_id:n,src:s})}),Object.values(e)}function Di(t){return!t.length||!t[0].body?!1:t[0].body.id==="HeavyAdIntervention"}function Ni(t){let e=`${ct()}//${te()}/widget_issue/heavy_ad_block/block`;window.$.ajax({method:"POST",url:e,data:t})}function zi(t){if(!window.ReportingObserver)return;new window.ReportingObserver(i=>{if(!Di(i))return;let n=Li();if(!n.length)return;Ni({options:t,items:n})},{buffered:!0}).observe()}function Ne(t){zi(t)}var{$:v}=window;function Dt(){let t=v(".thumbnail").eq(0),e=t.length?t.offset().top+t.height()/2-20:50;v(".prev, .next").css("top",e)}function qi(t,e){let{item_id:i,responsive_group:n,post_param:s}=t,{nolog:r,settings_group:o}=t;r===void 0&&(r=!1),o===void 0&&(o=0),v(".recommendations").addClass("loading"),oe({item_id:i,responsive_group:n,post_param:s,settings_group:o,nolog:r}).then(a=>{let c=v(".recommendations");a.find(".list-sub").length&&c.find(".list-sub").html("").replaceWith(a.find(".list-sub").clone()),c.find(".list").infiniteSwipe("destroy").html("").replaceWith(a.find(".list").clone());let l=c.find(".target-wrap"),f=Number(l.attr("data-data_count")),p=Number(l.attr("data-item_count")),m=Math.ceil(f/p);c.find(".total").text(m);let b=new F({$wrap:c,total:m});v(window).on("expose",()=>b.onExpose()),v(".recommendations").removeClass("loading");let A=typeof n=="number"?n+1:0;v(".widget").attr("data-responsive-group",A),Dt(),v(window).trigger("syncheight").trigger("onload_responsive_group"),e&&e()})}var ze=!1;window.initWidgetPage=function(t){if(ze)return;ze=!0;let e=v(window),{widget_id:i,widget_name:n,channel:s,lang:r,service_name:o,country:d,service_type:a,messages:c,impressionlog_link:l,exposelog_link:f,post_param:p,ad_implog_links:m,ad_exposelog_links:b,settings_group:A,init_responsive_group:L,is_secret_widget:k,is_infinite_feed:pt,thumbnail_fix_16x10:W,pre_expose:ht,wrapped_by_tab:et,init_tab_idx:h,is_block_item:u,wrapped_frame:x,service_id:C,ad_size:D,ad_default_request_id:P,uid:O,is_test:Re,r_log:Nt,ad_log:zt}=t,Rt=l,qt=f,Wt=m,Bt=b;if(Nt){let{c:S,impression_p:N,click_redirect_p:gt,r:X,expose_r_count:J}=Nt,B=`https://r-log.dable.io/s/${encodeURIComponent(o)}/u/${O}`;Rt=`${B}/impression?c=${S}&p=${N}&r=${X}&r_start=0&r_end=${J}`,qt=`${B}/expose?c=${S}&r=${X}&r_start=0&r_end=${J}`,v(".item-link").each(function(_t,nt){let j=v(nt);if(!j.closest("[data-ad_idx]").length){let M=j.parent().data("item_id");j.attr("href",`${B}/click_redirect?c=${S}&p=${gt[M]}&r=${X}&r_start=0&r_end=${J}`)}})}if(zt){let{c:S,impression_p:N,expose_p:gt,click_redirect_p:X}=zt,J=N.length,B=`https://ad-log.dable.io/services/${encodeURIComponent(o)}/users/${O}/campaigns`,_t=`https://sp-api.dable.io/services/${encodeURIComponent(o)}/users/${O}/campaigns`,nt=[],j=[];for(let M=0;M<J;M++){let H=N[M][0],z=gt[M][0],ot=H.m==="ad"?B:_t;nt.push([`${ot}/${H.cam}/contents/${H.con}/request?q=${S}&${H.qs}`]),j.push([`${ot}/${z.cam}/contents/${z.con}/expose?${z.qs}&q=${S}`])}Wt=nt,Bt=j,v("[data-ad_idx]").each(function(M,H){let z=X[M],ot=v(H),We=z.m==="ad"?B:_t;ot.children().attr("href",`${We}/${z.cam}/contents/${z.con}/click_redirect?q=${S}`)})}let jt=t.responsive||[],Ht=L;jt.length>0&&ue(jt,Ht,(S,N)=>{Ht=N,S?qi({item_id:null,responsive_group:N,post_param:p,settings_group:A},()=>v(".widget").css("opacity",1)):v(".widget").css("opacity",1)});let mt=null;e.on("pre-expose load resize orientationchange",()=>{clearTimeout(mt),mt=setTimeout(()=>{Dt(),e.trigger("syncheight"),mt=null},100)});let qe=new F({$wrap:v(".recommendations")}),it=[{request:Date.now(),expose:null}];e.on("expose",()=>{qe.onExpose(),it[0].expose=Date.now()}),$e(it),Dt(),Ee({from:c.from,eventTime:it}),pt&&Pe({id:c.id,infinite_feed_scroll_amount:c.infinite_feed_scroll_amount,from:c.from,is_test:Re}),de({service_id:C,service_name:o,service_type:a,messages:c,impressionlog_link:Rt,exposelog_link:qt,ad_implog_links:Wt,ad_exposelog_links:Bt,is_secret_widget:k,pre_expose:ht,wrapped_frame:x,ad_size:D,lang:r,uid:O,widget_id:i}),Gt({thumbnail_fix_16x10:W,is_secret_widget:k}),et&&Ct({init_tab_idx:h}),pe({id:c.id,from:c.from,wrapped_frame:x,service_id:C,uid:O,widget_id:i,ad_default_request_id:P}),u&&be({from:c.from,serviceName:o,$wrap:v(".recommendations"),lang:r}),ke(it),De({service_name:o,service_id:C,widget_id:i,uid:O,channel:s}),Ne({service_id:C,service_name:o,country:d,widget_id:i,widget_name:n}),Zt({thumbnail_fix_16x10:W})};window?.PARAMS&&initWidgetPage(window.PARAMS);})();
